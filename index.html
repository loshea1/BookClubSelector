<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Book Club Submission</title>
  <style>
    body { font-family: Arial; text-align: center; padding: 1em; }
    input, button { padding: 8px; margin: 8px; width: 200px; }
    #countdownTimer { font-weight: bold; color: #b22222; margin-top: 10px; }
  </style>
</head>
<body>
  nav a {
  margin: 0 10px;
  text-decoration: none;
  color: #2c5f2d;
  font-weight: bold;
}
nav a:hover {
  text-decoration: underline;
}

  <h1>📖 Book Club Submission</h1>
  <div>
    <div id="formSection">
      <input id="name" placeholder="Your Name"/><br/>
      <input id="title" placeholder="Book Title"/><br/>
      <input id="author" placeholder="Author"/><br/>
      <button onclick="submitEntry()">Submit</button>
      <p id="message"></p>
      <p id="countdownTimer"></p>
    </div>
  </div>

<script>
let submissions = JSON.parse(localStorage.getItem('submissions')) || [];
let members = JSON.parse(localStorage.getItem('members')) || ['leah','jojo','sarah','erika','katie daniels','katie rohrer','kelly','allison'];
let deadline = localStorage.getItem('deadline'); deadline = deadline ? new Date(deadline) : null;

function submitEntry() {
  let name = document.getElementById('name').value.trim().toLowerCase();
  const title = document.getElementById('title').value.trim();
  const author = document.getElementById('author').value.trim();
  if (!name || !title || !author) return document.getElementById('message').textContent = 'Fill all fields.';

  if (name === 'katie') {
    const which = prompt('Which Katie? (daniels or rohrer)');
    if (!['daniels','rohrer'].includes(which)) return;
    name = `katie ${which}`;
  }

  const idx = submissions.findIndex(s => s.name === name);
  const entry = { name, title, author };
  if (idx >= 0) submissions[idx] = entry;
  else submissions.push(entry);
  localStorage.setItem('submissions', JSON.stringify(submissions));

  document.getElementById('message').textContent = 'Submitted!';
  updateCountdown();
}

function updateCountdown() {
  const el = document.getElementById('countdownTimer');
  if (!deadline) return el.textContent = '';
  const now = new Date();
  const diff = deadline - now;
  if (diff <= 0) return el.textContent = '';
  const d = Math.floor(diff / (1000 * 60 * 60 * 24));
  const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
  const m = Math.floor((diff / (1000 * 60)) % 60);
  const s = Math.floor((diff / 1000) % 60);
  el.textContent = `⏳ Time left to submit: ${d}d ${h}h ${m}m ${s}s`;
}

setInterval(updateCountdown, 1000);
updateCountdown();
</script>
</body>
</html>
